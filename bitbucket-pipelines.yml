image: public.ecr.aws/a1t5b6y5/ndm/java17-maven-base:latest

pipelines:
  custom:
    deploy-to-artifactory-dev:
      - step:
          name: Build and Test
          caches:
            - maven
          script:
            - mvn -s settings.xml clean install deploy
    build-credit-micro-service-container:
      - step:
          name: Build and deploy
          caches:
            - maven
          script:
            - cd credit-micro-service
            - mvn -s settings.xml clean install